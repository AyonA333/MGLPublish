<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>html5蒙古文输入法</title>
    <style>
		* {
			margin: 0;
			padding: 0;
			list-style: none;
			-webkit-user-select: none;
			outline: 0;
			-webkit-tap-highlight-color: transparent;
		}    	
		header {
				position: relative;
				width: 100%;
				height: 45px;
				background-color: #FFFFFF;
				display: -webkit-box;
				-webkit-box-orient: horizontal;
				-webkit-box-pack: justify;
				-webkit-box-align: center;
                 background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACAQMAAACjTyRkAAAABlBMVEUAAADS0tOHvnxiAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjYGBoAAAAhACBGFbxzQAAAABJRU5ErkJggg==) no-repeat left;
				background-size: 100% 1px;
				background-position: bottom;
		}	
		.mui-action-back {
				background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADF0lEQVR4Xu2bUW7TQBCGZxzZr8AJgBMAN0hP0PQtWUfCOUGTEzScgHACghRvHt2eoOUG3ABxAuDVkTxokFeyoqp2ldn1OrZf8uC1tfPN7P4zsw5Czy/suf0wABgioOcEhiXQ8wDo3iY4nU7fBEGQBUGw2u12D6c6sFNLQCn1HhHvAeBXGIbj7Xb7pzcA5vP5mIgyALgLw3ApYTzD60QEKKUSRPwKAN/SNE1O9Xr1ee8BKKVuEHFNRAut9VbSeO8jQCnFXr8CgKUN470FkCTJy8PhkBHRBwAYa61/SHvevM+7JcDG53nOO/0rAJjYNN67CGCZA4AMEf9KyVxd5HgTAUbjieh7FEWJlMx1AoBNmfMegFLqGhE3ALBK05R/nV6tLgGWOURMbGl8E5KtACh3+s+s8UEQTCSKmibGPjbGOYCKzL21rfFNoDgFUMochz26krk6CM4A2Chl64xrct8JgNlsNgmCgPP6O+lqromRT42xDsBoPBF90VovT52w9PNWAcRxzDv9sk2ZqwNmDYApZYko2e/3t3UTaeu+OADfZK4OrCgAYzzLHHvedilbZ1yT+2IAfJW5OggiACrGi3Zs6yYvcV8MAADwIUUWRdHKVS3vDQCeSJnmMoSfURRddAWCSAQYT5TNzAciIgDgNra1ZqaE9630BEsluEXEd0R04TsE0QioeiWOYz7EuCyKYtGrRKgKQSm1QcTrXqbCBkSl4blJ03QltXal3mNtCVQnyOUwIvKSyLTWC6nJS7zHCQCfZdIZAAOBI4Fl0pdcwSkAhmByBQB47YNMOgdQgcCHIJeIeNWrtvgjucLHNmWylQg4yhX+f/5CRGut9SeJnf0572gdQLk5Gghb1zLpBYAjmbyPomjhqpr0BkAFAjdQf7uSSa8AVGWSiF7w4antatI7AAZCnudOSmovAZhd3JTURLTq1WdyRzK5RsQbW7mC1xFwXFITkbhMdgIAg+CPpYuiYIUQ7Tx3BoCtkrpTABgC/2FiNBqxQiwliqjOAXhOnt9k7ACgCaVzHjNEwDl7t4ltQwQ0oXTOY/4B/6J2UF40VMYAAAAASUVORK5CYII=) no-repeat;
				background-position: center;
				background-size: 25px;
				height: 100%;
				width: 25px;
				margin-left: 10px;
		}	
		.header_title {
				color:#5B5B5B;
				font-size: 18px;
				overflow: hidden;
				white-space: nowrap;
				text-overflow: ellipsis;
				font-weight: 500;
		}
		.add {
			  height: 100%;
			  width: 25px;
			  margin-right: 10px;
		}
        @font-face{
        	font-family:'chagaan';
	        src:url("css/mchagaan.woff") format("woff");
	    }
        .textarea{
            -webkit-box-sizing: border-box;
			box-sizing: border-box;        	
    		height:48%;
    		width:98%;
    		position: fixed;
    		top: 45px;
    		left: 0px;
    		display:block;
    		padding:1%; 
    		border:solid rgba(0,0,0,0.3) 1px;
    		border-radius: 5px;
    		margin:3px 1%; 
    		       		  	
        }
        .mgl_direction{
            -webkit-transform-origin: right top;
            -webkit-transform: translate(-100%,0px) rotate(270deg);
            -ms-transform-origin: right top;
            -ms-transform: translate(-100%,0px) rotate(270deg);
            -moz-transform-origin: right top;
            -moz-transform: translate(-100%,0px) rotate(270deg);
            -o-transform-orign: right top;
            -o-transform: translate(-100%,0px) rotate(270deg);
            transform-origin: right top;
            transform: translate(-100%,0px) rotate(270deg);        	
        }
        .mongol{
        	margin: 0px;
            border: solid #ffffff 0px;
        	resize: none;
            unicode-bidi: bidi-override;
            direction: rtl;        	
        	font-family:chagaan;
        	-webkit-text-orientation:sideways-right;
            -moz-writing-mode:vertical-lr;
            writing-mode:vertical-lr;
            -webkit-writing-mode:vertical-lr;
            -o-writing-mode:vertical-lr;
            -ms-writing-mode:tb-lr;
            writing-mode:tb-lr;
            word-break: break-word;
            font-size: 18px;
        }
    	.tabs{
    		height: 50%;
    		width: 100%;
    		position: fixed;
    		bottom: 0px;
    		left: 0px;
    		display: -webkit-box;
    		-webkit-box-orient: vertical;
    		padding: 0px;
    	}
    	.tabs_0{
    		width: 100%;
    		height:39%;
    		display: -webkit-box;
    		-webkit-box-orient:vertical;
    		border-top:solid 1px #000000; 
    		border-bottom:solid 1px #000000;  		
    	}
   	
    	.tabs_1{
    		width: 100%;
    		height:15%;
    		display: -webkit-box;
    		-webkit-box-orient:horizontal;
    		-webkit-align-content: center;
    		-webkit-box-align: center;
    		-webkit-box-pack:center;
    		background-color: rgba(0,0,0,0.2);    		    		    		
    	}
    	.tabs_2{
    		width: 100%;
    		height:15%;
    		display: -webkit-box;
    		-webkit-box-orient:horizontal; 
    		-webkit-align-content: center;
    		-webkit-box-align: center;
    		-webkit-box-pack:center; 
    		background-color: rgba(0,0,0,0.2);     		   		    		
    	}
    	.tabs_3{
    		width: 100%;
    		height:15%;
    		display: -webkit-box;
    		-webkit-box-orient:horizontal; 
    		-webkit-align-content: center;
    		-webkit-box-align: center;
    		-webkit-box-pack:center; 
    		background-color: rgba(0,0,0,0.2);     		   		    		
    	}
    	.tabs_4{
    		width: 100%;
    		height:15%;
    		display: -webkit-box;
    		-webkit-box-orient:horizontal;
    		-webkit-align-content: center;
    		-webkit-box-align: center;
    		-webkit-box-pack:center; 
    		background-color: rgba(0,0,0,0.2);
    		padding-bottom: 1%;     		    		    		
    	}
    	.tabs_{
    		background-color: rgba(255,255,255,1);
    		box-shadow: 1px 1px 1px rgba(0,0,0,1);
    		border-radius: 3px;
    		width:8%;
    		height: 45%;
    		padding: 7px 0px;
    		margin-left:1%;
    		display:flex;
    		justify-content: center;
    		align-items:center;
    		-webkit-box-pack:center;
    	}
        @font-face{font-family:btnicon;src:url(css/iconfont.ttf) format('truetype');}
        .tabs_shift:before { font-family:btnicon;content: "\e605";color: #000000;}
        .tabs_change:before { font-family:btnicon;content: "\e637";color: #000000; }
        .tabs_delete:before { font-family:btnicon;content: "\e721";color: #000000;}
        .tabs_return:before { font-family:btnicon;content: "\f002e";color: #000000;}    	
    	.tabs_shift{
    		background-color: rgba(255,255,255,1);
    		box-shadow: 1px 1px 1px rgba(0,0,0,1);
    		border-radius: 3px;
    		width:13%;
    		height:45%;
    		padding: 7px 0px;
    		display: -webkit-box;
    		-webkit-align-items: center;
    		-webkit-align-content: center;
    		-webkit-box-pack:center; 		
    	}
    	.tabs_shift_num{
    		background-color: rgba(255,255,255,1);
    		box-shadow: 1px 1px 1px rgba(0,0,0,1);
    		border-radius: 3px;
    		width:13%;
    		height:45%;
    		padding: 7px 0px;
    		display: -webkit-box;
    		-webkit-align-items: center;
    		-webkit-align-content: center;
    		-webkit-box-pack:center; 		
    	}    	
    	.tabs_delete{
    		background-color: rgba(255,255,255,1);
    		box-shadow: 1px 1px 1px rgba(0,0,0,1);
    		border-radius: 3px;
    		width:13%;
    		height:45%;
    		padding: 7px 0px;
    		margin-left:1%;
    		display: -webkit-box;
    		-webkit-align-items: center;
    		-webkit-align-content: center;
    		-webkit-box-pack:center;		
    	}
    	.tabs_num{
    		background-color: rgba(255,255,255,1);
    		box-shadow: 1px 1px 1px rgba(0,0,0,1);
    		border-radius: 3px;
    		width:23%;
    		padding: 7px 0px;
    		margin-left:1%;
    		display: -webkit-box;
    		-webkit-align-items: center;
    		-webkit-align-content: center;
    		-webkit-box-pack:center;    		
    	}
    	.tabs_change{
    		background-color: rgba(255,255,255,1);
    		box-shadow: 1px 1px 1px rgba(0,0,0,1);
    		border-radius: 3px;
    		width:13%;
    		height:45%;
    		padding: 7px 0px;
    		margin-left:1%;
    		display: -webkit-box;
    		-webkit-align-items: center;
    		-webkit-align-content: center;
    		-webkit-box-pack:center;      		  		
    	}
    	.tabs_tab{
    		background-color: rgba(255,255,255,1);
    		box-shadow: 1px 1px 1px rgba(0,0,0,1);
    		border-radius: 3px;
    		width:30%;
    		height:45%;
    		padding: 7px 0px;
    		margin:0px 1%;
    		display: -webkit-box;
    		-webkit-align-items: center;
    		-webkit-align-content: center;
    		-webkit-box-pack:center;    		
    	}
    	.tabs_return{
    		background-color: rgba(255,255,255,1);
    		box-shadow: 1px 1px 1px rgba(0,0,0,1);
    		border-radius: 3px;
    		width:23%;
    		padding: 7px 0px;
    		display: -webkit-box;
    		-webkit-align-items: center;
    		-webkit-align-content: center;
    		-webkit-box-pack:center;   		
    	}

        @font-face{font-family:mongol;src:url(css/MGQ.ttf) format('truetype');}
        .mgl{
        	font-family:mongol;
	        -webkit-text-orientation:sideways-right;
            -moz-writing-mode:vertical-lr;
            writing-mode:vertical-lr;
            -webkit-writing-mode:vertical-lr;
            -o-writing-mode:vertical-lr;
            -ms-writing-mode:tb-lr;
            writing-mode:tb-lr;
        }    		
        .en{
        	font-weight:600;font-family:arial;
        }
        .word_string{
    		background-color: rgba(255,255,255,1);
    		width:100%;
    		height:25%;
    		display:-webkit-box; 
    		border-bottom: solid #000000 1px;
            -webkit-box-align:center;
    		padding-left: 5px;  		        	
        }
        .word_list{
    		background-color: rgba(255,255,255,1);
    		display:-webkit-box;
    		-webkit-box-orient: horizontal; 
    		-webkit-box-pack: start;
    		-webkit-box-sizing: content-box; 
    		width:100%; 
    		overflow: scroll;     	
        }
        .word_list>.word_item{
        	border-left:solid #000000 1px;
        	display:flex;
        	padding-top: 5px;
    		align-items:center;
    		-webkit-box-pack:center;
    		width: 10%;
    		height:70%;       	
        }
        .word_list>.word_item:last-child{
        	border-right:solid #000000 1px;
        }
    </style>
</head>
<body>
	<header>
			<div class="mui-action-back"></div>
			<div class="header_title">Mongol Publisher</div>
			<div class="add"></div>
	</header>
	<div class="textarea" id="textbox"><textarea class="mgl_direction mongol" id="textarea" readonly="readonly"></textarea></div>
	<div id="tabs" class="tabs">
		<div class="tabs_0 " id="tabs_0">
			<div class="word_string" id="word_string"></div>
			<div class="word_list" id="word_list">

			</div>
		</div>		
		<div class="tabs_1" id="tabs_1">
			<div id="q" class="tabs_ mgl"></div>
			<div id="w" class="tabs_ mgl"></div>
			<div id="e" class="tabs_ mgl"></div>
			<div id="r" class="tabs_ mgl"></div>
			<div id="t" class="tabs_ mgl"></div>
			<div id="y" class="tabs_ mgl"></div>
			<div id="u" class="tabs_ mgl"></div>
			<div id="i" class="tabs_ mgl"></div>
			<div id="o" class="tabs_ mgl"></div>
			<div id="p" class="tabs_ mgl"></div>			
		</div>
		<div class="tabs_2" id="tabs_2">
			<div id="a" class="tabs_ mgl"></div>
			<div id="s" class="tabs_ mgl"></div>
			<div id="d" class="tabs_ mgl"></div>
			<div id="f" class="tabs_ mgl"></div>
			<div id="g" class="tabs_ mgl"></div>
			<div id="h" class="tabs_ mgl"></div>
			<div id="j" class="tabs_ mgl"></div>
			<div id="k" class="tabs_ mgl"></div>
			<div id="l" class="tabs_ mgl"></div>				
		</div>
		<div class="tabs_3" id="tabs_3">
			<div id="shift" class="tabs_shift"></div>
			<div id="z" class="tabs_ mgl"></div>
			<div id="x" class="tabs_ mgl"></div>
			<div id="c" class="tabs_ mgl"></div>
			<div id="v" class="tabs_ mgl"></div>
			<div id="b" class="tabs_ mgl"></div>
			<div id="n" class="tabs_ mgl"></div>
			<div id="m" class="tabs_ mgl"></div>
			<div id="delete" class="tabs_delete"></div>				
		</div>
		<div class="tabs_4">
			<div id="num" class="tabs_num" style="font-weight:600;font-family:arial;">123</div>
			<div id="change" class="tabs_change"></div>
			<div id="tab" class="tabs_tab"></div>
			<div id="return" class="tabs_return"></div>			
		</div>
	</div>
	<audio id="clicks" src="js/clcik.mp3" controls preload="auto" hidden="true"  ></audio>
</body>
    <script type="text/javascript">
            var type = 1; //0:en,1:mn;
            var ntype = 1; //0:en,1:mn;
            var sntype = 0; //0:en:,1:mn;
    	    var mongol = [
    		            {'q':'','w':'','e':'','r':'','t':'','y':'','u':'','i':'','o':'','p':''},
    	                {'a':'','s':'','d':'','f':'','g':'','h':'','j':'','k':'','l':''},
    	                {'z':'','x':'','c':'','v':'','b':'','n':'','m':''}
    	            ];
    	    var english = [
    		            {'q':'Q','w':'W','e':'E','r':'R','t':'T','y':'Y','u':'U','i':'I','o':'O','p':'P'},
    	                {'a':'A','s':'S','d':'D','f':'F','g':'G','h':'H','j':'J','k':'K','l':'L'},
    	                {'z':'Z','x':'X','c':'C','v':'V','b':'B','n':'N','m':'M'}
    	            ];
    	    var mn_numbers = [
    		            {'1':'1','2':'2','3':'3','4':'4','5':'5','6':'6','7':'7','8':'8','9':'9','10':'0'},
    	                {'11':'','12':'⁈','13':'⁉','14':'(','15':')','16':"᠁",'17':'@','18':'¥','19':'','20':'&#8226;'},
    	                {'31':"᠃",'32':'᠂','33':'︖','34':'︕','35':"&#92;"},
    	                {'41':'','42':'','43':"{",'44':"}",'45':'#','46':'%','47':'^','48':'*','49':'+','50':'='},
    	                {'51':'|','52':"/",'53':'~','54':'','55':'','56':'','57':'','58':'','59':''}
    	              ];
    	    var en_numbers = [
    		            {'1':'1','2':'2','3':'3','4':'4','5':'5','6':'6','7':'7','8':'8','9':'9','10':'0'},
    	                {'11':'-','12':"&#8260;",'13':':','14':';','15':'(','16':')','17':'$','18':'&','19':'@','20':'&#34;'},
    	                {'31':'&#46;','32':'&#44;','33':'?','34':'!','35':"&#92;"},
    	                {'41':"&#x5b;",'42':"&#x5d;",'43':"&#123;",'44':"&#125;",'45':'#','46':'%','47':'^','48':'*','49':'+','50':'='},
    	                {'51':'|','52':"&#34;",'53':'~','54':"&#60;",'55':"&#62;",'56':'€','57':'£','58':'¥','59':'&#8226;'}
    	              ];   
        (function() {           
            var TOUCHSTART, TOUCHEND;
            if (typeof(window.ontouchstart) != 'undefined') {
                TOUCHSTART = 'touchstart';
                TOUCHEND = 'touchend';
                TOUCHMOVE='touchmove';
 
            } else if (typeof(window.onmspointerdown) != 'undefined') {
                TOUCHSTART = 'MSPointerDown';
                TOUCHEND = 'MSPointerUp';
                TOUCHMOVE='MSPointerMove';
            } else {
                TOUCHSTART = 'mousedown';
                TOUCHEND = 'mouseup';
                TOUCHMOVE = 'mousemove';
            }
            function NodeTouch(node) {
                this._node = node;
            }
            function tap(node,callback,scope) {
                node.addEventListener(TOUCHSTART, function(e) {
                    x = e.touches[0].pageX;
                    y = e.touches[0].pageY;
                });
                node.addEventListener(TOUCHEND, function(e) {
                    e.stopPropagation();
                    e.preventDefault();
                    var curx = e.changedTouches[0].pageX;
                    var cury = e.changedTouches[0].pageY;
                    if (Math.abs(curx - x) < 6 && Math.abs(cury - y) < 6) {
                        callback.apply(scope, arguments);
                    }
                });
            }
            function longTap(node,callback,scope) {
                var x,y,startTime=0,endTime=0,in_dis=false;
                node.addEventListener(TOUCHSTART, function(e) {
                    x = e.touches[0].pageX;
                    y = e.touches[0].pageY;
                    startTime=(new Date()).getTime();
                });
                node.addEventListener(TOUCHEND, function(e) {
                    e.stopPropagation();
                    e.preventDefault();
                    var curx = e.changedTouches[0].pageX;
                    var cury = e.changedTouches[0].pageY;
                    if (Math.abs(curx - x) < 6 && Math.abs(cury - y) < 6) {
                        in_dis=true;
                    }else{
                        in_dis=false;
                    }
                    endTime=(new Date()).getTime();
                    if (endTime - startTime > 300 && in_dis) {
                        callback.apply(scope, arguments);
                    }
                });
            }
            NodeTouch.prototype.on = function(evt, callback, scope) {
                var scopeObj;
                var x,y;
                if (!scope) {
                    scopeObj = this._node;
                } else {
                    scopeObj = scope;
                }
                if (evt === 'tap') {
                    tap(this._node,callback,scope);
                } else if(evt === 'longtap'){
                    longTap(this._node,callback,scope);
                } else {
                    this._node.addEventListener(evt, function() {
                        callback.apply(scope, arguments);
                    });
                }
                return this;
            }           
            window.$ = function(selector) {
                var node = document.querySelector(selector);
                if (node) {
                    return new NodeTouch(node);
                } else {
                    return null;
                }
            }
        })();
        function letters(){
   				document.getElementById('num').innerHTML = "123";
   				var k = 0;
   				if(type==0){
   					ntype = 1;
   					type = 1;
   			        for(var items in mongol){
   				        var keys = mongol[items];
                        k++; 
                        for(var i in keys){  
                               document.getElementById('tabs_'+k).innerHTML = '';	
                               var html = '';
                               if(k==3){
                               	  html += '<div id="shift" class="tabs_shift"></div>';
                               }                               
                               for(var i in keys){ 
                            	   	html += '<div id="'+i+'" class="tabs_ mgl">'+keys[i]+'</div>';
                               }
                               if(k==3){
                               	  html += '<div id="delete" class="tabs_delete"></div>';
                               }
                               document.getElementById('tabs_'+k).innerHTML = html;
                        } 
                    }   					
   				}else if(type==1){
   					type = 0;
   					ntype = 1;
   			        for(var items in english){
   				        var keys = english[items];
                        k++; 
                        for(var i in keys){ 
                               document.getElementById('tabs_'+k).innerHTML = '';	
                               var html = '';
                               if(k==3){
                               	  html += '<div id="shift" class="tabs_shift"></div>';
                               }                               
                               for(var i in keys){ 
                            	   	html += '<div id="'+i+'" class="tabs_ en">'+keys[i]+'</div>';
                               }
                               if(k==3){
                               	  html += '<div id="delete" class="tabs_delete"></div>';
                               }
                               document.getElementById('tabs_'+k).innerHTML = html;
                        } 
                    }   					
   				}        	
            }
        function numbers(){
   				var k = 0;
                if(ntype == 1){
                	document.getElementById('num').innerHTML = "ABC";
                	ntype = 0;
                    if(type==1){
   			            for(var items in mn_numbers){
   				            var keys = mn_numbers[items];
                            k++; 
                            if(k<4){
                               document.getElementById('tabs_'+k).innerHTML = '';	
                               var html = '';
                               if(k==3){
                               	  html += '<div id="shift_num" class="tabs_shift_num en">#+=</div>';
                               }                               
                               for(var i in keys){ 
                            	   if(k==1){
                            	   	    html += '<div id="'+i+'" class="tabs_ en">'+keys[i]+'</div>';
                            	   }else if(k==2){
                            	   	    html += '<div id="'+i+'" class="tabs_ mgl" style="font-weight:600;">'+keys[i]+'</div>';
                            	   }else if(k==3){
                            	   	    html += '<div id="'+i+'" class="tabs_ mgl" style="font-weight:600;">'+keys[i]+'</div>';
                            	   }
                               }
                               if(k==3){
                               	  html += '<div id="delete" class="tabs_delete"></div>';
                               }
                               document.getElementById('tabs_'+k).innerHTML = html;
                            }
                        }   						
   					}else if(type==0){
   			            for(var items in en_numbers){
   				            var keys = en_numbers[items];
                            k++;
                            if(k<4){
                               document.getElementById('tabs_'+k).innerHTML = '';
                               var html = '';
                               if(k==3){
                               	  html += '<div id="shift_num" class="tabs_shift_num en">#+=</div>';
                               }                               
                               for(var i in keys){ 
                            	   if(k==1||k==2){
                            	   	    html += '<div id="'+i+'" class="tabs_ en">'+keys[i]+'</div>';
                            	   }else if(k==3){
                            	   	    html += '<div id="'+i+'" class="tabs_ en">'+keys[i]+'</div>';
                            	   }
                               }
                               if(k==3){
                               	  html += '<div id="delete" class="tabs_delete"></div>';
                               }
                               document.getElementById('tabs_'+k).innerHTML = html;                               
                            }
                        }   					
   				   }  		                    	
                }else if(ntype == 0){
                    ntype = 1;	
                    letters();
                }    
            }
        function number_sub(){
        	    var k = 0;
                if(type==1){
            	    if(sntype==1){
            		    document.getElementById('shift_num').innerHTML = "#+=";
            		    sntype=0;
            		    for(var items in mn_numbers){
            			    if(items<3){
   				                var keys = mn_numbers[items];
                                k++; 
                                if(k<3){
                                    document.getElementById('tabs_'+k).innerHTML = '';	
                                    var html = '';                              
                                    for(var i in keys){ 
                            	        if(k==1){
                            	   	        html += '<div id="'+i+'" class="tabs_ en">'+keys[i]+'</div>';
                            	        }else if(k==2){
                            	   	        html += '<div id="'+i+'" class="tabs_ mgl" style="font-weight:600;">'+keys[i]+'</div>';
                            	        }
                                    }
                                    document.getElementById('tabs_'+k).innerHTML = html;
                                }
                            }
                        } 
            	    }else if(sntype==0){
            		    document.getElementById('shift_num').innerHTML = "123";
            		    sntype=1;
   			            for(var items in mn_numbers){
   			        	    if(items>2){
   				                var keys = mn_numbers[items];
                                k++; 
                                if(k<3){
                                    document.getElementById('tabs_'+k).innerHTML = '';	
                                    var html = '';                              
                                    for(var i in keys){ 
                            	   	    html += '<div id="'+i+'" class="tabs_ mgl" style="font-weight:600;">'+keys[i]+'</div>';
                                    }
                                    document.getElementById('tabs_'+k).innerHTML = html;
                                }
                            }
                        }             		
            	    }  						
   			    }else if(type==0){
            	    if(sntype==1){
            		    sntype=0;
            		    document.getElementById('shift_num').innerHTML = "#+=";
            		    for(var items in en_numbers){
            			    if(items<3){
   				                var keys = en_numbers[items];
                                k++; 
                                if(k<3){
                                    document.getElementById('tabs_'+k).innerHTML = '';	
                                    var html = '';                              
                                    for(var i in keys){ 
                            	   	    html += '<div id="'+i+'" class="tabs_ en">'+keys[i]+'</div>';
                                    }
                                    document.getElementById('tabs_'+k).innerHTML = html;
                                }
                            }
                        } 
            	    }else if(sntype==0){
            		    sntype=1;
            		    document.getElementById('shift_num').innerHTML = "123";
   			            for(var items in en_numbers){
   			        	    if(items>2){
   				                var keys = en_numbers[items];
                                k++; 
                                if(k<3){
                                    document.getElementById('tabs_'+k).innerHTML = '';	
                                    var html = '';                              
                                    for(var i in keys){ 
                            	   	    html += '<div id="'+i+'" class="tabs_ en">'+keys[i]+'</div>';
                                    }
                                    document.getElementById('tabs_'+k).innerHTML = html;
                                }
                            }
                        }             		
            	    }  		  					
   			    }  		            	
          }
          function ajax(url, fnSucc, fnFaild){
                var oAjax = null;
    			if(window.XMLHttpRequest){
        			oAjax = new XMLHttpRequest();
    			}else{
        			oAjax = new ActiveXObject("Microsoft.XMLHTTP");
    			}  
    			oAjax.open('GET', url, true);
    			oAjax.send();
      
    			//4.接收返回
    			oAjax.onreadystatechange = function(){ 
        			if(oAjax.readyState == 4){
            			if(oAjax.status == 200){
                			fnSucc(oAjax.responseText) 
            			}else{
                			if(fnFaild){
                    			fnFaild();
                			}
            			}
        			}
    			};
			}        
        var mglstr = [{
        	'q':'','w':'','e':{0:'',1:'',2:''},'r':'','t':{0:'',1:''},'y':'','u':{0:'',1:''},'i':{0:'',1:''},'o':{0:'',1:''},'p':'',
        	'a':{0:'',1:''},'s':'','d':{0:'',1:''},'f':'','g':{0:'',1:''},'h':{0:'',1:''},'j':'','k':'','l':'',
        	'z':'','x':'','c':{0:'',1:''},'v':{0:'',1:''},'b':'','n':'','m':''
        },{
        	                  
        	'q':'','w':{0:'',1:''},'e':'','r':{0:'',1:''},'t':'','y':{0:'',1:''},'u':{0:'',1:''},'i':{0:'',1:''},'o':{0:'',1:''},'p':{0:'',1:''},
        	'a':'','s':'','d':{0:'',1:''},'f':{0:'',1:''},'g':{0:'',1:'',2:'',3:'',4:''},'h':{0:'',1:'',2:'',3:''},'j':'','k':{0:'',1:''},'l':{0:'',1:''},
        	'z':'','x':'','c':'','v':'','b':{0:'',1:''},'n':{0:'',1:'',2:'',3:''},'m':{0:'',1:''}
        },{
        	'q':'','w':'','e':{0:'',1:'',2:''},'r':'','t':'','y':'','u':{0:'',1:'',2:''},'i':{0:'',1:''},'o':{0:'',1:'',2:''},'p':'',
        	'a':{0:'',1:'',2:''},'s':'','d':{0:'',1:''},'f':'','g':{0:'',1:''},'h':'','j':'','k':'','l':'',
        	'z':'','x':'','c':{0:'',1:''},'v':{0:'',1:''},'b':'','n':{0:'',1:''},'m':''
        },{
        	 'e':{'0':'','1':'','2':'','3':'',},
             'g':{'0':'','1':'','2':'','3':'',},
        	 'b':{'0':'','1':'','2':'','3':'','4':'','5':'','6':'','7':'','8':'','9':'','10':'','11':''},
        	 'n':'',
        	 'uu':'',
        }];
        var words = [];
        var tmp = '';
        var wlen = 0;
        var sme = 0;
        var isShift = 0;
        function isEgxig(strings){
        	var e_str = "avc";
        	var isE = false;
        	for(var i=0;i<e_str.length;i++){
	            var tmp_e = e_str.charAt(i);
	            if(strings.indexOf(tmp_e) >= 0){
	            	isE = true;
	            }
            }
        	return isE;
        }
        function mgl_ime(str,target){
       		if(sme==0){
        		var s = mglstr[0][target];
        		if(typeof s != 'object'){
                    words.push(s);
                    if(target=='b'||target=='p'||target=='k'||target=='f'){
                    	words.push(s+''+mglstr[2]['a'][2]);
                    }else if(target=='z'){
        				    if(isShift==1){
        				    	words[0] = '';
        				    	document.getElementById("word_string").innerHTML = 'ʒ';
        				    	words.push(''+''+mglstr[2]['a'][0]);
        				    }else{
        				    	words.push(s+''+mglstr[2]['a'][0]);
        				    }
        		    }else{
                    	words.push(s+''+mglstr[2]['a'][0]);
                    }
        		}else{
        			if(target=='e'||target=='u'||target=='i'||target=='o'||target=='a'||target=='v'||target=='c'){
        				words.push(s[0]);
        			    words.push(s[1]);
        			    if(target=='e'){
        			    	words.push(s[2]);
        			    }
        			}else if(target=='d'||target=='t'||target=='g'||target=='h'){
        				words.push(s[0]);
        			    words.push(s[0]+mglstr[2]['a'][0]);
        			}
        		}
        		sme=1;
        	}else if(sme==1){
        		var tmp_ = '';
        		var before_str =str.substring(0,str.length-1);
        		var spstr = str.split("");
                var before = spstr[spstr.length-2];
                for(var i=0;i<str.length;i++) {
                	if(i==0){
        		        if(str[0]=='e'||str[0]=='u'||str[0]=='i'||str[0]=='o'||str[0]=='a'||str[0]=='v'||str[0]=='c'){
        			           tmp_ += mglstr[0][str[0]][0];
        		        }else if(str[0]=='d'||str[0]=='t'||str[0]=='g'||str[0]=='h'){
        				       tmp_ += mglstr[0][str[0]][0];
        		        }else if(str[i]=='z'&&isShift==1){
        				    	tmp_ += '';
        				    	document.getElementById("word_string").innerHTML = 'ʒ';
        		        }else if(str[i]=='ʒ'){
        				    	tmp_ += '';
        		        }else{
        				    tmp_ += mglstr[0][str[0]];
        		        }                	 	
                	}else if(i==(str.length-1)){
        		        if(str[i]=='u'||str[i]=='o'){
        			         if(before=='f'||before=='k'||before=='b'){
        			         	tmp_  = tmp_ .substring(0,i-1);
        			         	tmp_ += mglstr[1][before][1]+mglstr[2][str[i]][1];
        			         }else if(before=='g'||before=='h'){
        			         	tmp_  = tmp_ .substring(0,i-1);
        			         	tmp_ += mglstr[1][before][2]+mglstr[2][str[i]][1];
        			         }else if(before=='n'){
                				tmp_  = tmp_.substring(0,i-1);
       		        		    tmp_ += mglstr[1][str[i-1]][0]+mglstr[2][str[i]][0];
                			}else{
        			         	tmp_ += mglstr[2][str[i]][0];
        			         }
        		        }else if(str[i]=='e'||str[i]=='a'){
         			         if(before=='y'){
        			         	tmp_  = tmp_ .substring(0,i-1);
        			         	words.push(tmp_ +mglstr[1][before][0]+mglstr[2][str[i]][0]);
        			         	tmp_ += mglstr[1][before][1]+mglstr[2][str[i]][1];
        			         }else if(before=='w'){
        			         	if(str[i]=='a'){
        			         		words.push(tmp_ + mglstr[2][str[i]][0]);
        			         		tmp_  = tmp_ .substring(0,i-1);
        			         	    tmp_ += mglstr[1][before][1]+mglstr[2][str[i]][1];
        			         	}else{
        			         		tmp_ += mglstr[2][str[i]][0];
        			         	}
        			         }else if(before=='g'||before=='h'){
        			         	if(str[i]=='a'){
        			         		if(i!=1){
        			         		    tmp_  = tmp_.substring(0,i-1);
        			         	        tmp_ += mglstr[1][before][3]+mglstr[2][str[i]][1];	
        			         		}else{
        			         			tmp_  = tmp_.substring(0,i-1);
       		        		            tmp_ += mglstr[0][str[i-1]][0]+mglstr[1][str[i]][0];
        			         		}
        			         	}else{
        			         		tmp_  = tmp_ .substring(0,i-1);
        			         	    tmp_ += mglstr[1][before][1]+mglstr[2][str[i]][2];
        			         	}
        			         }else if(before=='f'||before=='k'||before=='b'||before=='p'){
        			         	if(i==1){
        			         	    tmp_ += mglstr[2][str[i]][2];
        			         	}else{
        			         		tmp_  = tmp_ .substring(0,i-1);
        			         	    tmp_ += mglstr[1][before][0]+mglstr[2][str[i]][2];
        			         	}
        			         }else if(before=='m'||before=='l'||before=='y'||before=='r'){
        			         	if(i==1){
        			         		tmp_  = tmp_ .substring(0,i-1);
        			         		tmp_ += mglstr[0][before][0]+mglstr[2][str[i]][0];        			         		
        			         	}else{
        			         		tmp_  = tmp_.substring(0,i-1);
        			         		words.push(tmp_ +mglstr[1][before][0]+mglstr[2][str[i]][0]);
        			         		tmp_ += mglstr[1][before][1]+mglstr[2][str[i]][1];        			         		
        			         	}
        			         }else if(before=='n'){
        			         	if(i==1){
        			         		tmp_  = tmp_ .substring(0,i-1);
        			         		tmp_ += mglstr[0][before][0]+mglstr[2][str[i]][0];        			         			       			         		
        			         	}else{
        			         		tmp_  = tmp_ .substring(0,i-1);
        			         		words.push(tmp_ +mglstr[1][before][0]+mglstr[2][str[i]][0]);
        			         		tmp_ += mglstr[1][before][1]+mglstr[2][str[i]][1];        			         		
        			         	}
        			         }else{
        			         	tmp_ += mglstr[2][str[i]][0];
        			         }        		        	
        		        }else if(str[i]=='v'||str[i]=='c'){
        			         if(before=='f'||before=='k'||before=='b'||before=='p'){
        			         	tmp_  = tmp_ .substring(0,i-1);
        			         	tmp_ += mglstr[1][before][1]+mglstr[2][str[i]][1];
        			         }else if(before=='g'||before=='h'){
        			         	tmp_  = tmp_ .substring(0,i-1);
        			         	tmp_ += mglstr[1][before][0]+mglstr[2][str[i]][0];
        			         }else if(before=='n'){
                				tmp_  = tmp_.substring(0,i-1);
       		        		    tmp_ += mglstr[1][str[i-1]][0]+mglstr[2][str[i]][0];
                			}else{
        			         	tmp_ += mglstr[2][str[i]][0];
        			         }        		        	
        		        }else if(str[i]=='n'){
        				    if(isShift==1){
        				    	tmp_ += mglstr[2][str[i]][1];
        				    	document.getElementById("word_string").innerHTML = before_str+'ŋ';
        				    }else{
        				    	tmp_ += mglstr[2][str[i]][0];
        				    }  
        		        }else if(str[i]=='i'){
        		        	if(before=='g'||before=='h'){
        		        		tmp_  = tmp_.substring(0,i-1);
       		        		    tmp_ += mglstr[1][before][1]+mglstr[2][str[i]][1];
        		        	}else if(before=='f'||before=='k'||before=='b'||before=='p'){
        		        		tmp_ += mglstr[2][str[i]][1];
        		        	}else if(before=='n'){
        		        		if(i==1){
                					tmp_  = tmp_.substring(0,i-1);
       		        		    	tmp_ += mglstr[0][str[i-1]][0]+mglstr[2][str[i]][0];        		        			
        		        		}else{
                					tmp_  = tmp_.substring(0,i-1);
       		        		    	tmp_ += mglstr[1][str[i-1]][0]+mglstr[2][str[i]][0];        		        			
        		        		}
                			}else{
        		        		tmp_ += mglstr[2][str[i]][0];
        		        	}
        		        }else if(str[i]=='z'){
        				        if(isShift==1){
        				        	str[i] = 'ʒ';
        				        	document.getElementById("word_string").innerHTML = before_str+'ʒ';
        				    	    tmp_ += '';
        				        }else{
        				    	    tmp_ += mglstr[2][str[i]][0];
        				        }
        		        }else if(str[i]=='t'){
        				        if(isShift==1){
        				        	str[i] = 'T';
        				        	document.getElementById("word_string").innerHTML = before_str+'T';
        				    	    tmp_ += '';
        				        }else{
        				    	    tmp_ += mglstr[2][str[i]][0];
        				        }
        		        }else if(str[i]=='g'){
        				        if(isEgxig(str)){
        				        	tmp_ += mglstr[2][str[i]][1];
        				        }else{
        				        	if(str=='sig'||str=='xig'){
        				        		words.push('');
        				        	}
        				    	    tmp_ += mglstr[2][str[i]][0];
        				        }
        		        }else{
        				    tmp_ += mglstr[2][str[i]][0];
        		        }
                	}else{
                		var s = mglstr[0][target];
                		if(str[i]=='u'||str[i]=='o'){
                			if(str[i-1]=='g'||str[i-1]=='h'){
                				if(i==1){
                				    tmp_  = tmp_.substring(0,i-1);
       		        		        tmp_ += mglstr[1][str[i-1]][2]+mglstr[1][str[i]][0];                					
                				}else{
                				    tmp_  = tmp_.substring(0,i-1);
       		        		        tmp_ += mglstr[1][str[i-1]][2]+mglstr[1][str[i]][1];                					
                				}
                			}else if(str[i-1]=='k'||str[i-1]=='f'||str[i-1]=='b'||str[i-1]=='p'){
                				if(i==1){
                					tmp_  = tmp_.substring(0,i-1);
       		        		    	tmp_ += mglstr[1][str[i-1]][1]+mglstr[1][str[i]][0];
       		        		    }else{
                					tmp_  = tmp_.substring(0,i-1);
       		        		    	tmp_ += mglstr[1][str[i-1]][1]+mglstr[1][str[i]][1];       		        		    
       		        		    }
                			}else if(i==1){
                				tmp_ += mglstr[1][str[i]][0];
                			}else{
                				tmp_ += mglstr[1][str[i]][1];
                			}
                		}else if(str[i]=='v'||str[i]=='c'){
                			if(str[i-1]=='g'||str[i-1]=='h'){
                				if(i==1){
                				    tmp_  = tmp_.substring(0,i-1);
       		        		        tmp_ += mglstr[0][str[i-1]][0]+mglstr[1][str[i]][0];                					
                				}else{
                				    tmp_  = tmp_.substring(0,i-1);
       		        		        tmp_ += mglstr[1][str[i-1]][0]+mglstr[1][str[i]][0]; 
       		        		    }
                			}else if(str[i-1]=='k'||str[i-1]=='f'||str[i-1]=='b'||str[i-1]=='p'){
                				tmp_  = tmp_.substring(0,i-1);
       		        		    tmp_ += mglstr[1][str[i-1]][1]+mglstr[1][str[i]][0];
                			}else{
                				tmp_ += mglstr[1][str[i]][0];
                			}                			
                		}else if(str[i]=='e'){
                			if(str[i-1]=='g'||str[i-1]=='h'){
                				tmp_  = tmp_.substring(0,i-1);
       		        		    tmp_ += mglstr[1][str[i-1]][1]+mglstr[1][str[i]];
                			}else{
                				 tmp_ += mglstr[1][str[i]];
                			}
                		}else if(str[i]=='g'||str[i]=='h'){
        		        	if(isEgxig(str)){
        		        	    if((str[i+1]=='e'||str[i+1]=='u'||str[i+1]=='i'||str[i+1]=='o'||str[i+1]=='a'||str[i+1]=='v'||str[i+1]=='c')&&str[i]=='g'){
        			         		tmp_ += mglstr[1][str[i]][0];
        			            }else{
        			            	if(str[i]=='g'){
        			            		tmp_ += mglstr[1][str[i]][4];
        			            	}else{
        			            		tmp_ += mglstr[1][str[i]][0];
        			            	}
        			            }
        		        	}else{
        		        	   tmp_ += mglstr[1][str[i]][1];	
        		        	}
        		        }else if(str[i]=='f'||str[i]=='g'||str[i]=='h'||str[i]=='k'||str[i]=='b'||str[i]=='p'){
        		        	tmp_ += mglstr[1][str[i]][0];
        		        }else if(str[i]=='l'||str[i]=='m'||str[i]=='r'){
        		        	tmp_ += mglstr[1][str[i]][0];
        		        }else if(str[i]=='d'){
        		        	 if(str[i+1]=='e'||str[i+1]=='u'||str[i+1]=='i'||str[i+1]=='o'||str[i+1]=='a'||str[i+1]=='v'||str[i+1]=='c'){
        		        	 	tmp_ += mglstr[1][str[i]][0];
        		        	 }else{
        		        	 	tmp_ += mglstr[1][str[i]][1];
        		        	 }
        		        }else if(str[i]=='i'){
        		        	if(str=='naima'){
        				    	tmp_ += mglstr[1][str[i]][0];
        		        	}else if(str[i-1]=='o'||str[i-1]=='u'||str[i-1]=='i'){
        				    	tmp_ += mglstr[1][str[i]][0];
        				    }else if(str[i-1]=='a'||str[i-1]=='e'){
        				    	tmp_ += mglstr[1][str[i]][0];
        				    }else if(str[i-1]=='c'||str[i-1]=='v'){
        				    	tmp_ += mglstr[1][str[i]][0];
        				    }else if(str[i-1]=='f'||str[i-1]=='k'||str[i-1]=='b'||str[i-1]=='b'){
        				    	if(i==1){
        				    		tmp_  = tmp_.substring(0,i-1);
       		        		        tmp_ += mglstr[0][str[i-1]]+mglstr[1][str[i]][0];
        				    	}else{
        				    		tmp_  = tmp_.substring(0,i-1);
       		        		        tmp_ += mglstr[1][str[i-1]][0]+mglstr[1][str[i]][0];
        				    	}
        		            }else if(str[i-1]=='g'||str[i-1]=='h'){
        				    	if(i==1){
        				    		tmp_  = tmp_.substring(0,i-1);
       		        		        tmp_ += mglstr[0][str[i-1]][1]+mglstr[1][str[i]][0];
        				    	}else{
        				    		tmp_  = tmp_.substring(0,i-1);
       		        		        tmp_ += mglstr[1][str[i-1]][1]+mglstr[1][str[i]][0];
        				    	}        		            	
        		            }else{
        				    	tmp_ += mglstr[1][str[i]][0];
        				    }
        		        }else if(str[i]=='ŋ'){
        				    	tmp_ += mglstr[1]['n'][2];
        		        }else if(str[i]=='n'){
        		        	if(str[i+1]=='e'||str[i+1]=='u'||str[i+1]=='i'||str[i+1]=='o'||str[i+1]=='a'||str[i+1]=='v'||str[i+1]=='c'){
        		        		tmp_ += mglstr[1]['n'][0];
        		        	}else if(str[i+1]=='w'&&str[i+2]=='a'&&str[i+3]==null){
                                tmp_ += mglstr[1]['n'][0];       		        		
        		        	}else{
        		        	    tmp_ += mglstr[1]['n'][3];	
        		        	}
        		        }else if(str[i]=='y'){
        				    tmp_ += mglstr[1][str[i]][0];
        		        }else if(str[i]=='ʒ'){
        				    tmp_ += '';
        			    }else if(str[i]=='T'){
        			    	tmp_ += '';    
        			    }else if(str[i]=='w'){
        				    tmp_ += mglstr[1][str[i]][0];
        		        }else{
        				   tmp_ += mglstr[1][str[i]][0]; 
        		        }                		
                	}
                }
                words.push(tmp_);
        	}
            if(isShift==1){
                isShift=0; 
        		document.getElementById("shift").style.backgroundColor = "rgba(255,255,255,1)";
        		document.getElementById("shift").style.color = "#FFFFFF";
        		document.getElementById("z").innerHTML = '';
        		document.getElementById("n").innerHTML = '';
        		//tmp += e.target.innerHTML;
        	}
            var tmp_html = '';
            document.getElementById("word_list").innerHTML = '';
            for(var val in words) {
                	words[val] = words[val].replace(//, "");
                	words[val] = words[val].replace(//, "");
                	words[val] = words[val].replace(//, "");
                	words[val] = words[val].replace(//, "");
                	words[val] = words[val].replace(//g, "");
                	words[val] = words[val].replace(//g, "");
                	words[val] = words[val].replace(//g, "");
                	words[val] = words[val].replace(//g, "");                	
                tmp_html += '<div class="word_item mgl">'+words[val]+'</div>';
            }            
            document.getElementById("word_list").innerHTML = tmp_html;
            words = [];
        }
        function print_dag(){
        	var tmp_html = '';
            tmp_html += '<div class="word_item mgl">'+mglstr[3]['n']+'</div>';           		           
            for(var val in mglstr[3]['e']) {
            		tmp_html += '<div class="word_item mgl">'+mglstr[3]['e'][val]+'</div>';
            }
            for(var val in mglstr[3]['g']) {
            		tmp_html += '<div class="word_item mgl">'+mglstr[3]['g'][val]+'</div>';
            }            	
            tmp_html += '<div class="word_item mgl">'+mglstr[3]['uu']+'</div>';
            for(var val in mglstr[3]['b']) {
            	tmp_html += '<div class="word_item mgl">'+mglstr[3]['b'][val]+'</div>';
            } 
            document.getElementById("word_list").innerHTML = tmp_html;
        }
        $("#word_list").on("tap",function(e){
        	   document.getElementById("textarea").innerHTML = document.getElementById("textarea").innerHTML+e.target.innerHTML+" ";
        	   document.getElementById("word_list").innerHTML = '';
        	   document.getElementById("word_string").innerHTML = '';
               words = [];
               tmp = '';
               wlen = 0;
               sme = 0;
               isShift = 0;
               print_dag();
        });
        $("#tabs").on("tap",function(e){
        	var target = e.target.getAttribute('id');
        	switch(target){ 
                case "change" : 
                    letters();
                    document.getElementById(target).style.backgroundColor = "dimgray";
        	        setTimeout('document.getElementById("'+target+'").style.backgroundColor = "#FFFFFF";',100); 
                break; 
                case "num" : 
                    numbers();
                    document.getElementById(target).style.backgroundColor = "dimgray";
        	        setTimeout('document.getElementById("'+target+'").style.backgroundColor = "#FFFFFF";',100);                     
                break; 
                case "shift_num" : 
                    number_sub();
                    document.getElementById(target).style.backgroundColor = "dimgray";
        	        setTimeout('document.getElementById("'+target+'").style.backgroundColor = "#FFFFFF";',100);                     
                break; 
                case "shift" : 
                	if(type==0){
        		    	isShift = 1;
        		        document.getElementById("shift").style.backgroundColor = "rgba(42,120,230,1)";
        		        document.getElementById("shift").style.color = "#ffffff";
        		    }else if(type==1){
        		    	isShift = 1;
        		        document.getElementById("shift").style.backgroundColor = "rgba(42,120,230,1)";
        		        document.getElementById("shift").style.color = "#ffffff";
        		    	if(sme==1){
        		    		document.getElementById("z").innerHTML = '';
        		    		document.getElementById("n").innerHTML = '';
        		    	}else{
        		    		document.getElementById("z").innerHTML = '';
        		    	}   
        		    }
                    document.getElementById(target).style.backgroundColor = "dimgray";
        	        setTimeout('document.getElementById("'+target+'").style.backgroundColor = "#FFFFFF";',100); 
                break;
                case "delete" : 
                    if(type==1&&ntype==1){
                    	var deltarget = document.getElementById("word_string").innerHTML;
                    	if(deltarget!=''){
                    	    var deleted =deltarget.substring(0,deltarget.length-1);
                    	    document.getElementById("word_string").innerHTML = deleted;
                    	    var dtar = deleted[deleted.length-1];
                    	    --wlen;
                            mgl_ime(deleted,dtar);                    		
                    	}else{
                    		var t_deltarget = document.getElementById("textarea").innerHTML;
                    		    t_last = t_deltarget.substr(t_deltarget.length-1);
                    		var t_deleted =t_deltarget.substring(0,t_deltarget.lastIndexOf(t_last));
                    		document.getElementById("textarea").innerHTML = t_deleted;
                    	}
                    }else if(type==0&&ntype==1){
                    		var t_deltarget = document.getElementById("textarea").innerHTML;
                    		    t_last = t_deltarget.substr(t_deltarget.length-1);
                    		var t_deleted =t_deltarget.substring(0,t_deltarget.lastIndexOf(t_last));
                    		document.getElementById("textarea").innerHTML = t_deleted;                    	
                    }else if(ntype==0){
                    		var t_deltarget = document.getElementById("textarea").innerHTML;
                    		    t_last = t_deltarget.substr(t_deltarget.length-1);
                    		var t_deleted =t_deltarget.substring(0,t_deltarget.lastIndexOf(t_last));
                    		document.getElementById("textarea").innerHTML = t_deleted;                    
                    }
                    document.getElementById(target).style.backgroundColor = "dimgray";
        	        setTimeout('document.getElementById("'+target+'").style.backgroundColor = "#FFFFFF";',100);                     
                break;
                case "tab" : 
                    document.getElementById("textarea").innerHTML = document.getElementById("textarea").innerHTML+e.target.innerHTML+" ";  
                    document.getElementById(target).style.backgroundColor = "dimgray";
        	        setTimeout('document.getElementById("'+target+'").style.backgroundColor = "#FFFFFF";',100);                     
                break; 
                case "return" : 
                    document.getElementById("textarea").innerHTML = document.getElementById("textarea").innerHTML+e.target.innerHTML+"\n";
                    document.getElementById(target).style.backgroundColor = "dimgray";
        	        setTimeout('document.getElementById("'+target+'").style.backgroundColor = "#FFFFFF";',100);                    
                break; 
                case "word_string":break;
                case "word_list":break;
                case "tabs_0":break;
                case "tabs_1":break; 
                case "tabs_2":break; 
                case "tabs_3":break; 
                default : 
                    if(target!=undefined){
        		    	if(type==1&&ntype==1){
        		    		var str = document.getElementById("word_string").innerHTML;
        		            document.getElementById("word_string").innerHTML = str+target;
        		            ++wlen;
                            mgl_ime(str+target,target);                       	                        	
        		    	}else if(type==0&&ntype==1){
        			    	if(isShift==0){
        						document.getElementById("textarea").innerHTML = document.getElementById("textarea").innerHTML+e.target.innerHTML.toLowerCase();
        			    	}else if(isShift==1){
        				    	isShift=0;
        				    	document.getElementById("shift").style.backgroundColor = "rgba(255,255,255,1)";
        				    	document.getElementById("shift").style.color = "#FFFFFF";
        				    	document.getElementById("textarea").innerHTML = document.getElementById("textarea").innerHTML+e.target.innerHTML;
        			    	}
        		    	}else if(ntype==0){
        			    	//var str = document.getElementById("tabs_0").innerHTML;
        		        	//document.getElementById("tabs_0").innerHTML = str+e.target.innerHTML;
        		        	//tmp = '';
        		        	//sme=0;
        		        	document.getElementById("textarea").innerHTML = document.getElementById("textarea").innerHTML+e.target.innerHTML;
        		        }
        	        }
                    document.getElementById(target).style.backgroundColor = "dimgray";
        	        setTimeout('document.getElementById("'+target+'").style.backgroundColor = "#FFFFFF";',100);                     
                break;
            }
        });
        print_dag();
        document.getElementById("textbox").style.height = ((document.getElementById("textbox").offsetHeight)-42)+"px";
        document.getElementById("textarea").style.width = (document.getElementById("textbox").offsetHeight)-8+"px";
        document.getElementById("textarea").style.height = (document.getElementById("textbox").offsetWidth)-8+"px";
    </script>
</html>